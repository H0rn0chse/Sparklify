{
  "version": 3,
  "sources": ["../src/Sparkle.ts", "../src/SparkleAnimation.ts"],
  "sourcesContent": ["// Sparkles from https://www.joshwcomeau.com/react/animated-sparkles-in-react/\nconst path =\n  \"M26.5 25.5C19.0043 33.3697 0 34 0 34C0 34 19.1013 35.3684 26.5 43.5C33.234 50.901 34 68 34 68C34 68 36.9884 50.7065 44.5 43.5C51.6431 36.647 68 34 68 34C68 34 51.6947 32.0939 44.5 25.5C36.5605 18.2235 34 0 34 0C34 0 33.6591 17.9837 26.5 25.5Z\";\n\nexport class Sparkle {\n  #root: HTMLDivElement = document.createElement(\"div\");\n  size: string;\n  color: string;\n\n  constructor(size: string, color: string) {\n    this.size = size;\n    this.color = color;\n\n    this.#createHtml();\n  }\n\n  #createHtml(): void {\n    this.#root.classList.add(\"sparkleWrapper\");\n    this.#root.style.width = this.size;\n\n    const outerSparkle = document.createElement(\"div\");\n    outerSparkle.classList.add(\"outerSparkle\");\n    outerSparkle.style.width = this.size;\n\n    const innerSparkle = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"svg\"\n    );\n    innerSparkle.setAttribute(\"viewBox\", \"0 0 68 68\");\n    innerSparkle.innerHTML = `<path d=\"${path}\" fill=\"${this.color}\"/>`;\n    innerSparkle.classList.add(\"innerSparkle\");\n    innerSparkle.style.width = this.size;\n\n    outerSparkle.appendChild(innerSparkle);\n    this.#root.appendChild(outerSparkle);\n  }\n\n  getDomRef(): HTMLDivElement {\n    return this.#root;\n  }\n\n  destroy(): void {\n    this.#root.remove();\n  }\n}\n", "import { Sparkle } from \"./Sparkle\";\n\nexport interface SparkleAnimationOptions {\n  target: HTMLElement;\n  size?: string;\n  colors?: string[];\n  animationLength?: number;\n  initialDelay?: number;\n  pauseMin?: number;\n  pauseMax?: number;\n}\n\nexport class SparkleAnimation {\n  private target: HTMLElement;\n  private size: string;\n  private colors: string[];\n  private animationLength: number;\n  private initialDelay: number;\n  private pauseMin: number;\n  private pauseMax: number;\n  private animationLengthMin: number;\n  private animationLengthMax: number;\n  private isRunning: boolean = false;\n  private animationController: AbortController = new AbortController();\n\n  constructor(options: SparkleAnimationOptions) {\n    this.target = options.target;\n    this.size = options.size ?? \"20px\";\n    this.colors = options.colors ?? [\"yellow\", \"white\", \"gold\", \"orange\"];\n    this.animationLength = options.animationLength ?? 700;\n    this.initialDelay = options.initialDelay ?? 0;\n    this.pauseMin = options.pauseMin ?? 100;\n    this.pauseMax = options.pauseMax ?? 500;\n    this.animationLengthMin = this.animationLength;\n    this.animationLengthMax = this.animationLength * 1.6;\n  }\n\n  private wait(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  private async runSparkle(animationLength: number): Promise<void> {\n      const color = this.colors[Math.floor(Math.random() * this.colors.length)];\n      const sparkle = new Sparkle(this.size, color);\n\n      const domRef = sparkle.getDomRef();\n      domRef.style.top = Math.random() * 100 + \"%\";\n      domRef.style.left = Math.random() * 100 + \"%\";\n      domRef.style.setProperty(\"--animation-length\", `${animationLength}ms`);\n      \n      if (Math.random() < 0.3) { // 30% chance to render behind content\n        domRef.style.zIndex = \"-1\";\n      } else {\n        domRef.style.zIndex = \"2\";\n      }\n\n      // handle abort\n      this.animationController.signal.addEventListener(\"abort\", () => {\n        sparkle.destroy();\n      });\n\n      this.target.insertAdjacentElement(\"afterbegin\", domRef);\n\n      await this.wait(animationLength);\n      sparkle.destroy();\n  }\n\n  private async animate(): Promise<void> {\n    await this.wait(this.initialDelay);\n\n    while (this.isRunning) {\n      const randomAnimationLength =\n        Math.random() * (this.animationLengthMax - this.animationLengthMin) +\n        this.animationLengthMin;\n      await this.runSparkle(randomAnimationLength);\n      \n      if (!this.isRunning) break;\n      \n      const pauseDuration = Math.random() * (this.pauseMax - this.pauseMin) + this.pauseMin;\n      await this.wait(pauseDuration);\n    }\n  }\n\n  start(): void {\n    if (this.isRunning) {\n      return;\n    }\n    this.isRunning = true;\n\n    this.animationController.signal.addEventListener(\"abort\", () => {\n      this.isRunning = false;\n    });\n\n    this.animate();\n  }\n\n  stop(): void {\n    this.animationController.abort();\n    this.animationController = new AbortController();\n  }\n}"],
  "mappings": "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",
  "names": ["path", "Sparkle", "#root", "size", "color", "#createHtml", "outerSparkle", "innerSparkle", "SparkleAnimation", "options", "ms", "resolve", "animationLength", "color", "sparkle", "Sparkle", "domRef", "randomAnimationLength", "pauseDuration"]
}
