var h="M26.5 25.5C19.0043 33.3697 0 34 0 34C0 34 19.1013 35.3684 26.5 43.5C33.234 50.901 34 68 34 68C34 68 36.9884 50.7065 44.5 43.5C51.6431 36.647 68 34 68 34C68 34 51.6947 32.0939 44.5 25.5C36.5605 18.2235 34 0 34 0C34 0 33.6591 17.9837 26.5 25.5Z",a=class{#t=document.createElement("div");size;color;constructor(t,e){this.size=t,this.color=e,this.#e()}#e(){this.#t.classList.add("sparkleWrapper"),this.#t.style.width=this.size;let t=document.createElement("div");t.classList.add("outerSparkle"),t.style.width=this.size;let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 68 68"),e.innerHTML=`<path d="${h}" fill="${this.color}"/>`,e.classList.add("innerSparkle"),e.style.width=this.size,t.appendChild(e),this.#t.appendChild(t)}getDomRef(){return this.#t}destroy(){this.#t.remove()}};function s(r,t){return Math.random()*(t-r)+r}var o=class{target;size;colors;animationLength;initialDelay;pauseMin;pauseMax;animationLengthMin;animationLengthMax;isRunning=!1;isPaused=!1;animationController=new AbortController;resolveAfterStop=void 0;constructor(t){this.target=t.target,this.size=t.size??"1.2rem",this.colors=t.colors??["yellow","white","gold","orange"],this.animationLength=t.animationLength??700,this.initialDelay=t.initialDelay??0,this.pauseMin=t.pauseMin??100,this.pauseMax=t.pauseMax??500,this.animationLengthMin=this.animationLength,this.animationLengthMax=this.animationLength*1.6}wait(t,e){return new Promise((n,i)=>{let l=setTimeout(n,t);e&&e.addEventListener("abort",()=>{clearTimeout(l),i(new DOMException("Aborted","AbortError"))})})}async runSparkle(t){let e=this.colors[Math.floor(Math.random()*this.colors.length)],n=new a(this.size,e),i=n.getDomRef();i.style.top=Math.random()*100+"%",i.style.left=Math.random()*100+"%",i.style.setProperty("--animation-length",`${t}ms`),Math.random()<.3?i.style.zIndex="-1":i.style.zIndex="2",this.animationController.signal.addEventListener("abort",()=>{n.destroy()}),this.target.insertAdjacentElement("afterbegin",i);try{await this.wait(t,this.animationController.signal)}catch{}n.destroy()}async animate(){this.isPaused=!0;try{await this.wait(this.initialDelay,this.animationController.signal)}catch{return}for(this.isPaused=!1;this.isRunning;){let t=s(this.animationLengthMin,this.animationLengthMax);if(await this.runSparkle(t),this.resolveAfterStop&&this.resolveAfterStop(null),!this.isRunning)break;this.isPaused=!0;let e=s(this.pauseMin,this.pauseMax);try{await this.wait(e,this.animationController.signal)}catch{break}this.isPaused=!1}}start(){this.isRunning||(this.isRunning=!0,this.animationController.signal.addEventListener("abort",()=>{this.isRunning=!1}),this.animate())}stop(){this.animationController.abort(),this.animationController=new AbortController}async stopOnceDone(){if(!this.isRunning||this.isPaused){this.stop();return}let t=Promise.withResolvers();this.resolveAfterStop=t.resolve,await t.promise,this.resolveAfterStop=void 0,this.stop()}};export{o as SparkleAnimation};
//# sourceMappingURL=sparklify.min.js.map
